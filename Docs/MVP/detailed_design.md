# 日语学习APP详细功能规格说明文档
## 1. 用户故事
### 1.1 基础词典查询
1. 作为大学生日语学习者 ，我希望能够通过日语、中文或罗马音输入查询单词，以便在课堂上快速查找不熟悉的词汇。
2. 作为自学日语爱好者 ，我希望查询结果显示完整的词条信息（假名、汉字、词性、释义），以便全面理解单词的用法。
3. 作为日语专业人士 ，我希望能够听到准确的单词发音，以便确认正确的发音方式。
4. 作为移动设备用户 ，我希望在没有网络连接的情况下也能查询基础词库，以便在任何环境下都能使用词典功能。
### 1.2 个人词库管理
1. 作为大学生日语学习者 ，我希望能够一键收藏查询过的单词，以便后续复习。
2. 作为自学日语爱好者 ，我希望能够创建和管理多个单词收藏夹，以便按主题或难度分类整理词汇。
3. 作为日语专业人士 ，我希望能够对收藏的单词添加个人笔记，以便记录特定语境下的用法或记忆技巧。
4. 作为多设备用户 ，我希望我的收藏数据能够安全地同步到所有设备，以便在不同设备上继续学习。
### 1.3 用户账户与数据同步
1. 作为隐私关注用户 ，我希望能够使用Apple ID一键登录，以便不需要创建额外的账户和密码。
2. 作为谨慎用户 ，我希望应用能够定期自动备份我的学习数据，以便防止数据丢失。
3. 作为新用户 ，我希望能够在不登录的情况下使用基本功能，以便先体验应用再决定是否注册。
## 2. 功能详述
### 2.1 词典查询功能 
2.1.1 多语言输入查询
- 功能描述 ：支持用户通过日语（平假名、片假名、汉字）、中文或罗马音输入查询单词。
- 交互逻辑 ：
  - 用户在搜索框输入查询内容
  - 系统自动识别输入类型（日语/中文/罗马音）
  - 实时显示搜索建议（最多显示5个）
  - 用户可点击建议或按搜索按钮执行查询
- 边界条件 ：
  - 最短查询长度：1个字符
  - 最长查询长度：50个字符
  - 无结果时显示"未找到匹配结果"提示
  - 网络中断时自动切换到离线词库 
2.1.2 词条详情展示
- 功能描述 ：显示查询单词的完整信息，包括假名、汉字、词性、释义等。
- 交互逻辑 ：
  - 点击搜索结果进入详情页
  - 顶部显示单词原形和读音
  - 中部显示词性和释义列表
  - 底部显示例句和相关词汇
  - 右上角提供收藏按钮
- 边界条件 ：
  - 长释义自动折叠，点击展开
  - 最多显示5个例句，更多例句通过"查看更多"按钮加载
  - 支持横竖屏自适应布局 
2.1.3 发音功能
- 功能描述 ：提供单词和例句的标准发音播放功能。
- 交互逻辑 ：
  - 点击单词旁的发音图标播放发音
  - 例句旁同样提供发音图标
  - 提供语速调节选项（0.75x, 1.0x, 1.25x）
- 边界条件 ：
  - 发音请求优先使用缓存
  - 离线状态下使用AVSpeechSynthesizer合成发音
  - 发音播放最大时长限制为10秒
  - 同时只允许一个音频播放，新请求会中断当前播放 
2.1.4 离线词库
- 功能描述 ：预装基础词库，支持离线查询常用单词。
- 交互逻辑 ：
  - 应用首次启动时自动解压词库到本地数据库
  - 联网状态下自动检查词库更新
  - 用户可在设置中查看词库版本和容量
- 边界条件 ：
  - 基础词库包含10,000个常用词汇
  - 词库大小不超过50MB
  - 词库更新增量不超过10MB
  - 更新下载仅在WiFi环境下自动进行
### 2.2 个人词库管理功能 
2.2.1 单词收藏
- 功能描述 ：允许用户一键收藏查询过的单词。
- 交互逻辑 ：
  - 词条详情页右上角提供收藏/取消收藏按钮
  - 收藏时弹出收藏夹选择对话框（如有多个收藏夹）
  - 收藏成功显示简短确认提示
  - 已收藏单词在搜索结果中显示收藏标记
- 边界条件 ：
  - 单个收藏夹最多支持10,000个单词
  - 最多创建50个收藏夹
  - 离线状态下收藏操作保存在本地，联网后自动同步 
2.2.2 收藏夹管理
- 功能描述 ：支持创建、编辑、删除和合并收藏夹。
- 交互逻辑 ：
  - 收藏页面提供收藏夹列表
  - 长按收藏夹显示操作菜单（重命名、删除、合并）
  - 点击收藏夹进入单词列表
  - 提供新建收藏夹按钮
- 边界条件 ：
  - 默认创建"我的收藏"文件夹，不可删除
  - 删除收藏夹需二次确认
  - 合并操作需选择目标收藏夹
  - 收藏夹名称长度限制为20个字符 
2.2.3 笔记功能
- 功能描述 ：允许用户为收藏的单词添加个人笔记。
- 交互逻辑 ：
  - 收藏单词详情页提供笔记编辑区域
  - 支持基本文本格式化（加粗、列表）
  - 自动保存编辑内容
  - 提供清空笔记选项
- 边界条件 ：
  - 单个笔记最大长度为1,000个字符
  - 编辑区域支持自动扩展
  - 支持表情符号输入
  - 笔记内容实时同步到云端 
2.2.4 数据同步与备份
- 功能描述 ：通过CloudKit实现用户数据的云同步和备份。
- 交互逻辑 ：
  - 用户登录Apple ID后自动启用同步
  - 设置页面提供同步状态和上次同步时间显示
  - 提供手动同步按钮
  - 支持导出/导入备份文件
- 边界条件 ：
  - 自动同步间隔不少于15分钟
  - 单次同步数据量不超过5MB
  - 冲突解决策略：以最新修改为准，保留冲突版本
  - 备份文件采用加密存储
### 2.3 用户账户功能 
2.3.1 Sign in with Apple
- 功能描述 ：支持用户通过Apple ID一键登录。
- 交互逻辑 ：
  - 首次启动应用提供登录选项
  - 设置页面提供登录/登出功能
  - 登录成功后显示用户名和头像
- 边界条件 ：
  - 登录失败提供明确错误提示
  - 支持隐藏邮箱选项
  - 登出需二次确认
  - 账户切换时提供数据处理选项 
2.3.2 游客模式
- 功能描述 ：允许用户在不登录的情况下使用基本功能。
- 交互逻辑 ：
  - 首次启动提供"跳过登录"选项
  - 设置页面显示登录提醒
  - 尝试使用需要登录的功能时提示登录
- 边界条件 ：
  - 游客模式下收藏数量限制为100个
  - 不支持云同步功能
  - 本地数据在登录后可选择合并到账户
## 3. 非功能性需求
### 3.1 性能指标 
3.1.1 响应时间
- 应用冷启动时间不超过3秒（iPhone X及以上机型）
- 搜索响应时间不超过500毫秒
- 词条详情页加载时间不超过1秒
- 发音播放延迟不超过300毫秒 
3.1.2 资源占用
- 应用安装包大小不超过100MB
- 运行内存占用不超过200MB
- CPU使用率平均不超过10%
- 电池消耗：正常使用1小时电量消耗不超过5% 
3.1.3 并发能力
- 支持同时处理最多5个后台任务
- 数据同步不影响前台操作流畅度
- 词库更新不阻塞用户操作
### 3.2 安全要求 
3.2.1 数据安全
- 用户收藏数据使用CloudKit安全存储
- 本地Realm数据库启用加密
- 导出备份文件采用AES-256加密
- 应用内不存储Apple ID密码 
3.2.2 隐私保护
- 明确的隐私政策说明
- 最小化数据收集范围
- 提供数据删除选项
- 不收集与功能无关的用户信息
### 3.3 可访问性标准 
3.3.1 视觉辅助
- 支持iOS动态字体大小调整
- 支持VoiceOver屏幕阅读
- 提供高对比度模式
- 颜色设计考虑色盲用户 
3.3.2 操作辅助
- 关键操作区域触控面积不小于44×44点
- 支持键盘操作（外接键盘）
- 避免需要精细运动控制的操作
- 提供操作撤销机制 
3.3.3 听觉辅助
- 发音功能提供字幕选项
- 操作反馈不仅依赖声音
- 重要提示同时提供视觉反馈
### 3.4 兼容性要求 
3.4.1 设备兼容性
- 支持iPhone 8及以上机型
- 支持iPad Air 2及以上机型
- 优化适配iPhone Pro Max系列大屏
- 支持iPad分屏多任务模式 
3.4.2 系统兼容性
- 支持iOS 14.0及以上版本
- 适配iOS 16深色模式
- 支持最新iOS版本发布后4周内完成适配
- 针对不同iOS版本的API差异提供兼容处理
## 4. 优先级与实施阶段
### 4.1 MVP阶段必要功能（优先级：高）
- 基础词典查询（多语言输入、词条展示）
- 单词发音（基础发音功能）
- 离线词库（基础10,000词）
- 简单收藏功能（单一收藏夹）
- Sign in with Apple基础集成
- 本地数据存储
### 4.2 第二阶段功能（优先级：中）
- 收藏夹管理（创建、编辑、删除）
- CloudKit数据同步
- 笔记功能
- 备份与恢复功能
- 游客模式完善
- 性能优化
### 4.3 第三阶段功能（优先级：低）
- 高级发音选项
- 扩展词库下载
- 收藏夹合并与高级管理
- 数据导出/导入
- 可访问性优化
- 兼容性扩展
通过本文档的详细功能规格说明，开发团队将能够清晰理解每个功能的具体实现要求、交互逻辑和边界条件，为日语学习APP的开发提供明确指导。